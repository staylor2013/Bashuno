<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bashuno Game</title>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    #hand, #lastcard { margin: 10px 0; }
    button { margin-top: 10px; }
</style>
</head>
<body>
<h1>UNO</h1>
<p id="hand">Your hand will appear here.</p>
<p id="lastcard">Last card played will appear here.</p>
<button id="play">Play top card</button>

<script defer>
const HAND = document.getElementById('hand');
const lastcard = document.getElementById('lastcard');
const playBtn = document.getElementById('play');

// Deck and players
const colors = ['red', 'yellow', 'blue', 'green'];
const numbers = [...Array(10).keys()];
const specials = ['+2', 'reverse', 'block'];
let deck = [];
const players = [
    { hand: [] }, // Bot 0
    { hand: [] }, // Bot 1
    { hand: [] }, // Bot 2
    { hand: [] }, // Human
];

let lastPlayed = null;
let gameOver = false;

// Create and shuffle deck
function createDeck() {
    deck = [];
    for (let color of colors) {
        for (let number of numbers) {
            deck.push({color, type: 'number', value: number});
            deck.push({color, type: 'number', value: number});
        }
    }
    for (let color of colors) {
        for (let special of specials) {
            deck.push({color, type: special});
            deck.push({color, type: special});
        }
    }

    for (let i = deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
    }
}

// Deal cards
function dealCards() {
    for (let i = 0; i < 4; i++) {
        for (let j = 0; j < 7; j++) {
            players[i].hand.push(deck.shift());
        }
    }
    updateHandDisplay(3);
}

// Display player's hand
function updateHandDisplay(playerIndex) {
    HAND.innerHTML = players[playerIndex].hand
        .map(card => card.type === 'number' ? `${card.color} ${card.value}` : `${card.color} ${card.type}`)
        .join("<br>");
}

// Check if a card is playable
function isPlayable(card) {
    if (!lastPlayed) return true;
    return card.color === lastPlayed.color || card.type === lastPlayed.type || card.color === 'wild';
}

// Human plays top card
function playCard() {
    if (gameOver) return;
    const card = players[3].hand.find(isPlayable);
    if (!card) {
        alert("No playable card! Drawing one...");
        const drawn = deck.shift();
        if (drawn) players[3].hand.push(drawn);
        updateHandDisplay(3);
        return;
    }
    // Remove card from hand
    players[3].hand.splice(players[3].hand.indexOf(card), 1);
    lastPlayed = card;
    lastcard.textContent = card.type === 'number' ? `${card.color} ${card.value}` : `${card.color} ${card.type}`;
    updateHandDisplay(3);
    checkWin();
    setTimeout(botTurn, 500); // Let bots play after human
}

// Bot turn logic
function botTurn() {
    if (gameOver) return;
    for (let i = 0; i < 3; i++) {
        const bot = players[i];
        let played = bot.hand.find(isPlayable);
        if (!played) {
            const drawn = deck.shift();
            if (drawn) bot.hand.push(drawn);
            continue;
        }
        bot.hand.splice(bot.hand.indexOf(played), 1);
        lastPlayed = played;
        lastcard.textContent = `Bot ${i+1} played ${played.type==='number'?played.color+' '+played.value:played.color+' '+played.type}`;
        if (bot.hand.length === 0) {
            alert(`Bot ${i+1} wins!`);
            gameOver = true;
            return;
        }
    }
}

// Check win for human
function checkWin() {
    if (players[3].hand.length === 0) {
        alert("You win!");
        gameOver = true;
    }
}

// Initialize game
createDeck();
dealCards();

// Button
playBtn.addEventListener('click', playCard);

</script>
</body>
</html>
